#!/bin/sh

# Unix-ifies filenames

# Check if an argument is provided
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <file-path>"
    exit 1
fi

# Input file path
input_path="$1"

# Extract the basename and extension
filename=$(basename "$input_path")
extension="${filename##*.}"
basename="${filename%.*}"

# Convert basename to lowercase
basename=$(echo "$basename" | tr '[:upper:]' '[:lower:]')

# Replace spaces with underscores
basename=$(echo "$basename" | tr ' ' '_')

# Replace special characters with English alphabet equivalents
basename=$(echo "$basename" | iconv -f utf-8 -t ascii//TRANSLIT)

# Convert extension to lowercase
extension=$(echo "$extension" | tr '[:upper:]' '[:lower:]')

# Construct the simplified filename
simplified_name="${basename}.${extension}"

# Output the simplified basename
echo "$simplified_name"
